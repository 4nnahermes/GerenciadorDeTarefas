<div class="container">
  <h2 class="page-title">Tabela de Tarefas</h2>
  <div class="mb-3">
    <label for="tituloPesquisa" class="form-label">Pesquisar por Título:</label>
    <input type="text" [(ngModel)]="tituloPesquisa" id="tituloPesquisa" class="form-control"
      placeholder="Digite o título da tarefa">
  </div>

  @if((listaTarefas() | filtroPesquisa: tituloPesquisa).length > 0) {
  <table class="table table-striped table-hover">
    <thead class="bg-primary text-white">
      <tr>
        <th>Título</th>
        <th>Descrição</th>
        <th>Pontos</th>
        <th>Concluída</th>
        <th>Morador</th>
        <th colspan="2">Ações</th>
      </tr>
    </thead>
    <tbody>
      @for (tarefa of listaTarefas() | filtroPesquisa: tituloPesquisa; track tarefa.id) {
      <tr>
        <td>{{tarefa.titulo}}</td>
        <td>{{tarefa.descricao}}</td>
        <td>{{tarefa.pontos | moeda }}</td>
        <td>{{tarefa.concluida ? 'Sim' : 'Não'}}</td>
        <td>{{tarefa.usuario}}</td>
        <td><a class="btn btn-secondary" routerLink="/editar-tarefa/{{tarefa.id}}" >Editar</a></td>
        <td><a class="btn btn-danger" routerLink="/tabela-tarefas" (click)="deletar(tarefa.id)">Excluir</a></td>
      </tr>
      }
    </tbody>
  </table>
  }
  @else {
  <p>Nenhuma tarefa disponível.</p>
  }
</div>

<app-list-card-tarefas></app-list-card-tarefas>